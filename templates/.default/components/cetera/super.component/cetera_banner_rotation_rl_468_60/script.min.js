function Cetera_Banner_Rotation(c){this.id=c.id;this.transition_speed=c.transition_speed;this.transition_interval=c.transition_interval;this.effect=c.effect;this.stop_on_focus=c.stop_on_focus;this._interval_pointer=null;var a=this;var b=$("#"+this.id);this.context=b;this.getActiveBanner=function(){return $("div.cetera-banner_slider-item",b).index($("div.cetera-banner_slider-item:visible",b).get(0))};this.getNextBanner=function(){var d=this.getActiveBanner();var e=d+1;if(!$("div.cetera-banner_slider-item:eq("+e+")",b).length){e=0}return e};this.hideBanner=function(d){if(this.effect=="slide_h"){if(this.next_banner_index<d){var e="100%";var f="-=100%"}else{var e="-100%";var f="+=100%"}$("div.cetera-banner_slider-item:eq("+d+")",b).animate({left:e},this.transition_speed,function(){$("div.cetera-banner_slider-item:eq("+d+")",b).hide()})}else{if(this.effect=="slide_v"){$("div.cetera-banner_slider-item:eq("+d+")",b).animate({top:"+=100%"},this.transition_speed,function(){$("div.cetera-banner_slider-item:eq("+d+")",b).hide()})}else{$("div.cetera-banner_slider-item:eq("+d+")",b).fadeOut(this.transition_speed)}}return true};this.showBanner=function(g){this.next_banner_index=g;if(typeof(this.onBeforeShowBanner)=="function"){this.onBeforeShowBanner(g)}var e=this.getActiveBanner();if(e!=g){if(this.effect=="slide_h"){if(g>e){var d="100%";var f="-=100%"}else{var d="-100%";var f="+=100%"}this.hideBanner(e);$("div.cetera-banner_slider-item:eq("+g+")",b).css("left",d).show().animate({left:f},this.transition_speed)}else{if(this.effect=="slide_v"){this.hideBanner(e);$("div.cetera-banner_slider-item:eq("+g+")",b).css("top","-100%").show().animate({top:"+=100%"},this.transition_speed)}else{this.hideBanner(e);$("div.cetera-banner_slider-item:eq("+g+")",b).fadeIn(this.transition_speed)}}}if(this.hasPager){$("div.cetera-banner_slider-pager a",b).removeClass("active prev next");$("div.cetera-banner_slider-pager a:eq("+g+")",b).addClass("active");if($("div.cetera-banner_slider-pager a:eq("+(g-1)+")",b).length){$("div.cetera-banner_slider-pager a:eq("+(g-1)+")",b).addClass("prev")}if($("div.cetera-banner_slider-pager a:eq("+(g+1)+")",b).length){$("div.cetera-banner_slider-pager a:eq("+(g+1)+")",b).addClass("next")}}if(typeof(this.onAfterShowBanner)=="function"){this.onAfterShowBanner(g)}};this.startRotation=function(){this._interval_pointer=setInterval(function(){var d=a.getNextBanner();a.showBanner(d)},this.transition_interval)};this.stopRotation=function(){clearInterval(this._interval_pointer)};this.init=function(){this.hasPager=new Boolean($("div.cetera-banner_slider-pager").length);$("div.cetera-banner_slider-wrapper div.cetera-banner_slider-item",b).hide();$("div.cetera-banner_slider-wrapper div.cetera-banner_slider-item:first",b).show();this.showBanner(0);this.startRotation();if(this.stop_on_focus){$("div.cetera-banner_slider-item",b).mouseenter(function(){a.stopRotation()}).mouseleave(function(){a.startRotation()})}if(this.hasPager){$("div.cetera-banner_slider-pager a",b).click(function(){if($(this).hasClass("active")||$("div.cetera-banner_slider-item:animated",b).length){return false}else{if($(this).is("[href=#stop]")){$(this).attr("href","#start").text("Start");a.stopRotation()}else{if($(this).is("[href=#start]")){$(this).attr("href","#stop").text("Stop");a.startRotation()}else{var d=$("div.cetera-banner_slider-pager a",b).index(this);a.stopRotation();a.showBanner(d);setTimeout(function(){a.startRotation()},a.transition_speed);return false}}}})}}};